#!/sbin/runscript

depend() {
	need net xdm
	after xdm
}

checkconfig() {
	if [ -z "$AUTH" ] || [ -z "$RFBAUTH" ] || [ -z "$RFBPORT" ] || \
	[ -z "$LOGFILE" ] || [ -z "$IP_ADDRESS" ] || [ -z "$DISPLAY" ] \
	[ -z "$CURSOR" ] || [ -z "$KEYBOARD_REPEAT" ]; then
	eerror "You must set config options in /etc/conf.d/x11vnc first"
	return 1
	fi
}

start() {
	ebegin "Starting x11vnc"
	start-stop-daemon -S -q -b -n x11vnc \
	-x /usr/bin/x11vnc -- $OPTS -forever -bg
	eend $?
}

stop() {
	ebegin "Stopping x11vnc"
	start-stop-daemon -K -q -n x11vnc
	eend $?
}
